#!/usr/local/bin/bash

# Go up n dirs
up() {
  str=""
  count=0
  while [[ $count -lt $1 ]]; do
    str=$str"../"
    let count=count+1
  done
  cd $str
}

# toggle hidden file visibility
showDots() {
  if [[ $(defaults read com.apple.finder AppleShowAllFiles) == YES ]]; then
    defaults write com.apple.finder AppleShowAllFiles NO
  else
    defaults write com.apple.finder AppleShowAllFiles YES
  fi
}

# gets git info
isInGit() {
  local gitrepo=$(git rev-parse --is-inside-work-tree 2> /dev/null)
  local branch=""
  local status=""

  if $gitrepo != ""; then
    branch=$(git symbolic-ref HEAD 2> /dev/null | sed -e 's/refs\/heads\///')
    status=$(git status --porcelain 2> /dev/null | tail -n1)
  fi

  echo $gitrepo
  echo $branch
  echo $status
}

# notification "Title" "Line one" "Line two"
notification() {
  if hash growlnotify 2> /dev/null; then
    growlnotify -t "$1" -m "$2"$'\n'"$3" --image "/Applications/iTerm.app/Contents/Resources/iTerm.icns"
  else
    osascript -e 'display notification "'$2'\n'$3'" with title "'$1'"';
  fi
}

# generate random string of n length
randString() {
  cat /dev/random | env LC_CTYPE=C tr -dc 'a-zA-Z0-9' | fold -w ${1:-32} | head -n 1
}
