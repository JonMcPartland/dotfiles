#!/usr/local/bin/bash

# Go up n dirs
up() {
  STRING=""
  COUNT=0
  while [[ $COUNT -lt $1 ]]; do
    STRING=$STRING"../"
    let COUNT=COUNT+1
  done
  cd $STRING
}

# toggle hidden file visibility
showDots() {
  if [[ $(defaults read com.apple.finder AppleShowAllFiles) == YES ]]; then
    defaults write com.apple.finder AppleShowAllFiles NO
  else
    defaults write com.apple.finder AppleShowAllFiles YES
  fi
}

# gets git info
isInGit() {
  local GITREPO=$(git rev-parse --is-inside-work-tree 2> /dev/null)
  local BRANCH=""
  local STATUS=""

  if $GITREPO != ""; then
    BRANCH=$(git symbolic-ref HEAD 2> /dev/null | sed -e 's/refs\/heads\///')
    STATUS=$(git status --porcelain 2> /dev/null | tail -n1)
  fi

  echo $GITREPO
  echo $BRANCH
  echo $STATUS
}

# notification "Title" "Line one" "Line two"
notification() {
  if hash growlnotify 2> /dev/null; then
    growlnotify -t "$1" -m "$2"$'\n'"$3" --image "/Applications/iTerm.app/Contents/Resources/iTerm.icns"
  else
    osascript -e 'display notification "'$2'\n'$3'" with title "'$1'"';
  fi
}

# generate random string of n length
randString() {
  cat /dev/random | env LC_CTYPE=C tr -dc 'a-zA-Z0-9' | fold -w ${1:-32} | head -n 1
}
