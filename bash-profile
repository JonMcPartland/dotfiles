#!/usr/bin/env bash

# nice opts
for OPTION in nocaseglob globstar histappend cmdhist cdspell dirspell autocd cdable_vars; do
  shopt -s "$OPTION" 2> /dev/null
done
unset OPTION


# navigation
CDPATH=".:~/localserver"


# History formatting
HISTTIMEFORMAT="%d/%m/%y %T "      # timestamp
HISTSIZE=500000                    # num lines
HISTFILESIZE=100000                # num bytes
HISTCONTROL="erasedups:ignoreboth" # prevent dupes
HISTIGNORE="&:[ ]*:cd:ls:history:ga:gdn:gup:gs:clear:" # ignore boring cmds


# autocompletion
bind "set completion-ignore-case on"
bind "set completion-map-case on"
bind "set show-all-if-ambiguous on"


# binary paths
export PHANTOMJS_BIN=/usr/local/bin/phantomjs
export RBENV_ROOT=/usr/local/var/rbenv
export PYTHONPATH=/usr/local/bin/python


# sources @todo: fix dirname
for FILE in ~/.dotfiles/{bin/*,bin}/bash-*; do
  test -f $FILE && . $FILE
done


# remove path dupes
type _tidyUpPath &> /dev/null && _tidyUpPath


# here be dragons
type rbenv   &> /dev/null && eval "$(rbenv init -)"
type thefuck &> /dev/null && eval "$(thefuck --alias)"

test -e "${HOME}/.iterm2_shell_integration.bash" && source "${HOME}/.iterm2_shell_integration.bash"
